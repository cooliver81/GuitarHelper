<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fretboard Trainer Visual</title>
  <style>
    body { background: #111; color: #eee; font-family: system-ui, sans-serif; text-align: center; padding-top: 40px; }
    .target { font-size: 2rem; margin-bottom: 10px; }
    .sub { color: #aaa; }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>üéØ Fretboard Trainer (Visual)</h1>
  <div class="target" id="targetText">Click ‚ÄúNew Target‚Äù</div>
  <div class="sub" id="hintText"></div>

  <button onclick="newTarget()">New Target</button>
  <button onclick="toggleHint()">Toggle Hint</button>

  <script>
    const noteNames = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
    const stringTuningMidi = {6: 40, 5: 45, 4: 50, 3: 55, 2: 59, 1: 64};
    const maxFret = 12;

    let currentTarget = null;
    let showHint = false;

    function midiToName(m) {
      const name = noteNames[m % 12];
      const octave = Math.floor(m / 12) - 1;
      return name + octave;
    }

    function randomTarget() {
      const strings = Object.keys(stringTuningMidi).map(Number);
      const string = strings[Math.floor(Math.random() * strings.length)];
      const openMidi = stringTuningMidi[string];
      const fret = Math.floor(Math.random() * (maxFret + 1));
      const midi = openMidi + fret;
      const fullName = midiToName(midi);
      const pc = noteNames[midi % 12];
      return {string, fret, midi, pc, fullName};
    }

    function newTarget() {
      currentTarget = randomTarget();
      const t = document.getElementById("targetText");
      t.textContent = `Target: STRING ${currentTarget.string} ‚Äì ${currentTarget.pc}`;
      updateHint();
    }

    function toggleHint() {
      showHint = !showHint;
      updateHint();
    }

    function updateHint() {
      const h = document.getElementById("hintText");
      if (!currentTarget || !showHint) {
        h.textContent = "";
        return;
      }
      h.textContent = `(e.g. string ${currentTarget.string}, fret ${currentTarget.fret} = ${currentTarget.fullName})`;
    }
  </script>
</body>
</html>
